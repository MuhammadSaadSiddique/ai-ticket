version: '3'
services:
  autogpt:
    entrypoint: poetry run autogpt --install-plugin-deps --skip-news
    #entrypoint: curl  http://mockopenai:5000/v1

    # uncomment thse next 3 lines for debugging
    #entrypoint: /bin/bash
    #stdin_open: true # docker run -i
    #tty: true        # docker run -t
    
    environment:
      - GITHUB_PAT="${GITHUB_PAT}"
      - GITHUB_REPO="jmikedupont2/ai-ticket"
      - OPENAI_API_KEY=your-openai-api-key
      - OPENAI_API_BASE=http://mockopenai:5000/v1
    #    "poetry", "run", "autogpt", "--install-plugin-deps"]
    #working_dir: ./vendor/Auto-GPT
    #volumes:
    #  - ./vendor/Auto-GPT/benchmark:/benchmark
    #  - ./vendor/Auto-GPT/autogpts/autogpt/:/app/autogpt
     #volumes:
     #  - ./vendor/Auto-GPT/autogpts/autogpt/benchmark:/benchmark
     # - ./vendor/Auto-GPT-Benchmarks/agbenchmark/:/app/agbenchmark
     # - ./docker-compose.yml:/app/docker-compose.yml

    #image: your-autogpt-image:tag
    build:
      #context: vendor/Auto-GPT/
      context: vendor/Auto-GPT/
    # Add other configuration as needed
    depends_on:
      - mockopenai

  mockopenai:
    environment:
      - GITHUB_PAT=${GITHUB_PAT}
      - GITHUB_REPO=${GITHUB_REPO}

    build:
      context: vendor/lollms/
    ports:
      -  "5000:5000"

